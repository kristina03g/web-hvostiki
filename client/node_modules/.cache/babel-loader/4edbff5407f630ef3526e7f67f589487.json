{"ast":null,"code":"/* eslint-disable arrow-body-style */\n\nimport utils from './utils';\nimport domUtils from \"./dom-utils\";\nvar absoluteRect = function absoluteRect(anchor, element, offset, scale) {\n  var scrollPos = elementScrollPosition(anchor, element);\n  var rect = utils.eitherRect(domUtils.offset(anchor), offset);\n  var stackScale = 2 * scale;\n  var stackScroll = domUtils.stackingElementScroll(element);\n  if (scale !== 1 && stackScroll) {\n    stackScroll.x /= stackScale;\n    stackScroll.y /= stackScale;\n  }\n  var stackOffset = domUtils.stackingElementOffset(element);\n  if (scale !== 1 && stackOffset) {\n    stackOffset.left /= stackScale;\n    stackOffset.top /= stackScale;\n  }\n  return domUtils.removeScroll(domUtils.addScroll(utils.removeStackingOffset(utils.scaleRect(rect, scale), stackOffset), stackScroll), scrollPos);\n};\nvar relativeRect = function relativeRect(anchor, element, offset, scale) {\n  var rect = utils.eitherRect(domUtils.position(anchor, element, scale), offset);\n  return utils.scaleRect(rect, scale);\n};\nvar elementScrollPosition = function elementScrollPosition(anchor, element) {\n  return anchor ? {\n    x: 0,\n    y: 0\n  } : domUtils.scrollPosition(element);\n};\nvar alignElement = function alignElement(settings) {\n  var anchor = settings.anchor;\n  var element = settings.element;\n  var anchorAlign = settings.anchorAlign;\n  var elementAlign = settings.elementAlign;\n  var margin = settings.margin;\n  var offset = settings.offset;\n  var positionMode = settings.positionMode;\n  var scale = settings.scale;\n  var currentScale = scale || 1;\n  var fixedMode = positionMode === 'fixed' || !domUtils.hasOffsetParent(element);\n  var anchorRect = fixedMode ? absoluteRect(anchor, element, offset, currentScale) : relativeRect(anchor, element, offset, currentScale);\n  var elementRect = utils.scaleRect(domUtils.offset(element), currentScale);\n  var result = domUtils.align({\n    anchorAlign: anchorAlign,\n    anchorRect: anchorRect,\n    elementAlign: elementAlign,\n    elementRect: elementRect,\n    margin: margin\n  });\n  return result;\n};\nexport default alignElement;","map":null,"metadata":{},"sourceType":"module"}