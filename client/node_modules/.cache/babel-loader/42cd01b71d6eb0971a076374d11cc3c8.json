{"ast":null,"code":"import { isFunction, isArray } from '../common';\n\n/* eslint-disable arrow-body-style */\n\nvar defineProperty = Object.defineProperty;\nexport var extend = Object.assign;\nexport var convertToHtml = function convertToHtml(html) {\n  var div = document.createElement(\"div\");\n  div.innerHTML = html;\n  return div.firstChild;\n};\nexport var appendHtml = function appendHtml(html, element) {\n  var div = document.createElement('div');\n  div.innerHTML = html;\n\n  // use childNodes instead of children\n  // to cover text nodes as well\n  while (div.childNodes.length > 0) {\n    element.appendChild(div.childNodes[0]);\n  }\n};\nexport var removeChildren = function removeChildren(element) {\n  while (element.firstChild) {\n    element.removeChild(element.firstChild);\n  }\n};\nexport var prepend = function prepend(element, originElement) {\n  originElement.insertBefore(element, originElement.firstChild);\n};\nexport var wrapInner = function wrapInner(parent, wrapper) {\n  parent.appendChild(wrapper);\n  while (parent.firstChild !== wrapper) {\n    wrapper.appendChild(parent.firstChild);\n  }\n};\nexport var toHyphens = function toHyphens(str) {\n  var result = str.replace(/([a-z][A-Z])/g, function (g) {\n    return g.charAt(0) + '-' + g.charAt(1).toLowerCase();\n  });\n  return result;\n};\nexport var toPixels = function toPixels(value) {\n  var result;\n  if (value && String(value).endsWith(\"px\")) {\n    result = value;\n  } else {\n    result = String(value) + \"px\";\n  }\n  return result;\n};\nvar detectOS = function detectOS(ua) {\n  var os = false,\n    minorVersion,\n    match = [],\n    // notAndroidPhone = !/mobile safari/i.test(ua),\n    agentRxs = {\n      wp: /(Windows Phone(?: OS)?)\\s(\\d+)\\.(\\d+(\\.\\d+)?)/,\n      fire: /(Silk)\\/(\\d+)\\.(\\d+(\\.\\d+)?)/,\n      android: /(Android|Android.*(?:Opera|Firefox).*?\\/)\\s*(\\d+)\\.?(\\d+(\\.\\d+)?)?/,\n      iphone: /(iPhone|iPod).*OS\\s+(\\d+)[\\._]([\\d\\._]+)/,\n      ipad: /(iPad).*OS\\s+(\\d+)[\\._]([\\d_]+)/,\n      meego: /(MeeGo).+NokiaBrowser\\/(\\d+)\\.([\\d\\._]+)/,\n      webos: /(webOS)\\/(\\d+)\\.(\\d+(\\.\\d+)?)/,\n      blackberry: /(BlackBerry|BB10).*?Version\\/(\\d+)\\.(\\d+(\\.\\d+)?)/,\n      playbook: /(PlayBook).*?Tablet\\s*OS\\s*(\\d+)\\.(\\d+(\\.\\d+)?)/,\n      windows: /(MSIE)\\s+(\\d+)\\.(\\d+(\\.\\d+)?)/,\n      tizen: /(tizen).*?Version\\/(\\d+)\\.(\\d+(\\.\\d+)?)/i,\n      sailfish: /(sailfish).*rv:(\\d+)\\.(\\d+(\\.\\d+)?).*firefox/i,\n      ffos: /(Mobile).*rv:(\\d+)\\.(\\d+(\\.\\d+)?).*Firefox/\n    },\n    osRxs = {\n      ios: /^i(phone|pad|pod)$/i,\n      android: /^android|fire$/i,\n      blackberry: /^blackberry|playbook/i,\n      windows: /windows/,\n      wp: /wp/,\n      flat: /sailfish|ffos|tizen/i,\n      meego: /meego/\n    },\n    formFactorRxs = {\n      tablet: /playbook|ipad|fire/i\n    },\n    browserRxs = {\n      omini: /Opera\\sMini/i,\n      omobile: /Opera\\sMobi/i,\n      firefox: /Firefox|Fennec/i,\n      mobilesafari: /version\\/.*safari/i,\n      ie: /MSIE|Windows\\sPhone/i,\n      chrome: /chrome|crios/i,\n      webkit: /webkit/i\n    };\n  for (var agent in agentRxs) {\n    if (agentRxs.hasOwnProperty(agent)) {\n      match = ua.match(agentRxs[agent]);\n      if (match) {\n        if (agent === \"windows\" && \"plugins\" in navigator) {\n          return false;\n        } // Break if not Metro/Mobile Windows\n\n        os = {};\n        os.device = agent;\n        os.tablet = testRegex(agent, formFactorRxs, false);\n        os.browser = testRegex(ua, browserRxs, \"default\");\n        os.name = testRegex(agent, osRxs);\n        os[os.name] = true;\n        os.majorVersion = match[2];\n        os.minorVersion = (match[3] || \"0\").replace(\"_\", \".\");\n        minorVersion = os.minorVersion.replace(\".\", \"\").substr(0, 2);\n        os.flatVersion = os.majorVersion + minorVersion + new Array(3 - (minorVersion.length < 3 ? minorVersion.length : 2)).join(\"0\");\n        break;\n      }\n    }\n  }\n  return os;\n};\nfunction testRegex(agent, regexes, dflt) {\n  for (var regex in regexes) {\n    if (regexes.hasOwnProperty(regex) && regexes[regex].test(agent)) {\n      return regex;\n    }\n  }\n  return dflt !== undefined ? dflt : agent;\n}\nexport var hasNativeScrolling = function hasNativeScrolling(userAgent) {\n  var os = detectOS(userAgent);\n  return os.ios || os.android;\n};\nvar detectBrowser = function detectBrowser(userAgent) {\n  var browser = false,\n    match = [],\n    browserRxs = {\n      edge: /(edge)[ \\/]([\\w.]+)/i,\n      webkit: /(chrome|crios)[ \\/]([\\w.]+)/i,\n      safari: /(webkit)[ \\/]([\\w.]+)/i,\n      opera: /(opera)(?:.*version|)[ \\/]([\\w.]+)/i,\n      msie: /(msie\\s|trident.*? rv:)([\\w.]+)/i,\n      mozilla: /(mozilla)(?:.*? rv:([\\w.]+)|)/i\n    };\n  for (var agent in browserRxs) {\n    if (browserRxs.hasOwnProperty(agent)) {\n      match = userAgent.match(browserRxs[agent]);\n      if (match) {\n        browser = {};\n        browser[agent] = true;\n        browser[match[1].toLowerCase().split(\" \")[0].split(\"/\")[0]] = true;\n        browser.version = parseInt(document.documentMode || match[2], 10);\n        break;\n      }\n    }\n  }\n  return browser;\n};\nexport var getEventMap = function getEventMap() {\n  var eventMap = {\n    down: \"touchstart mousedown\",\n    move: \"mousemove touchmove\",\n    up: \"mouseup touchend touchcancel\",\n    cancel: \"mouseleave touchcancel\"\n  };\n  var support = getSupportedFeatures();\n  if (support.touch && (support.mobileOS.ios || support.mobileOS.android)) {\n    eventMap = {\n      down: \"touchstart\",\n      move: \"touchmove\",\n      up: \"touchend touchcancel\",\n      cancel: \"touchcancel\"\n    };\n  } else if (support.pointers) {\n    eventMap = {\n      down: \"pointerdown\",\n      move: \"pointermove\",\n      up: \"pointerup\",\n      cancel: \"pointercancel pointerleave\"\n    };\n  } else if (support.msPointers) {\n    eventMap = {\n      down: \"MSPointerDown\",\n      move: \"MSPointerMove\",\n      up: \"MSPointerUp\",\n      cancel: \"MSPointerCancel MSPointerLeave\"\n    };\n  }\n  return eventMap;\n};\nexport var getSupportedFeatures = function getSupportedFeatures() {\n  var os = detectOS(navigator.userAgent);\n  var browser = detectBrowser(navigator.userAgent);\n  var chrome = browser.chrome,\n    mobileChrome = browser.crios,\n    mozilla = browser.mozilla,\n    safari = browser.safari;\n  var support = {};\n  support.mobileOS = os;\n  support.touch = \"ontouchstart\" in window;\n  support.pointers = !chrome && !mobileChrome && !mozilla && !safari && window.PointerEvent;\n  support.msPointers = !chrome && window.MSPointerEvent;\n  support.mouseAndTouchPresent = support.touch && !(support.mobileOS.ios || support.mobileOS.android);\n  support.eventCapture = document.documentElement.addEventListener;\n  var table = document.createElement(\"table\");\n  var transitions = support.transitions = false,\n    transforms = support.transforms = false;\n  var STRING = \"string\";\n  [\"Moz\", \"webkit\", \"O\", \"ms\"].forEach(function (prefix) {\n    var hasTransitions = typeof table.style[prefix + \"Transition\"] === STRING;\n    if (hasTransitions || typeof table.style[prefix + \"Transform\"] === STRING) {\n      var lowPrefix = prefix.toLowerCase();\n      transforms = {\n        css: lowPrefix !== \"ms\" ? \"-\" + lowPrefix + \"-\" : \"\",\n        prefix: prefix,\n        event: lowPrefix === \"o\" || lowPrefix === \"webkit\" ? lowPrefix : \"\"\n      };\n      if (hasTransitions) {\n        transitions = transforms;\n        transitions.event = transitions.event ? transitions.event + \"TransitionEnd\" : \"transitionend\";\n      }\n      return false;\n    }\n  });\n  table = null;\n  support.transforms = transforms;\n  support.transitions = transitions;\n  support.delayedClick = function () {\n    // only the mobile devices with touch events do this.\n    if (support.touch) {\n      // All iOS devices so far (by the time I am writing this, iOS 9.0.2 is the latest),\n      // delay their click events.\n      if (support.mobileOS.ios) {\n        return true;\n      }\n      if (support.mobileOS.android) {\n        if (!support.browser.chrome) {\n          // older webkits and webviews delay the click\n          return true;\n        }\n\n        // from here on, we deal with Chrome on Android.\n        if (support.browser.version < 32) {\n          return false;\n        }\n\n        // Chrome 32+ does conditional fast clicks if the view port is not user scalable.\n        var meta = document.querySelector(\"meta[name=viewport]\");\n        var contentAttr = meta ? meta.getAttribute(\"content\") : \"\";\n        return !contentAttr.match(/user-scalable=no/i);\n      }\n    }\n    return false;\n  };\n  return support;\n};\nexport var ownsElement = function ownsElement(parent, element) {\n  if (!element) {\n    return false;\n  }\n  var node = element.parentNode;\n  while (node !== null) {\n    if (node === parent) {\n      return true;\n    }\n    node = node.parentNode;\n  }\n  return false;\n};\nexport var contains = function contains(parent, element) {\n  return parent === element || ownsElement(parent, element);\n};\nexport var proxy = function proxy(method, context) {\n  return method.bind(context);\n};\nfunction isString(value) {\n  return typeof value === \"string\";\n}\nexport var on = function on(element, events, filter, handler, useCapture) {\n  addEventListeners(element, events, filter, handler, useCapture);\n};\nexport var addEventListeners = function addEventListeners(element, events, filter, handler, useCapture) {\n  var eventNames = isArray(events) ? events : (events || \"\").split(\" \");\n  eventNames.forEach(function (eventName) {\n    addEventListener(element, eventName, filter, handler, useCapture);\n  });\n};\nexport var addEventListener = function addEventListener(element, event, filter, handler, useCapture) {\n  var eventHandler = handler;\n  var eventFilter;\n  if (filter && isFunction(filter) && !handler) {\n    eventHandler = filter;\n  } else if (filter && isString(filter) && isFunction(eventHandler)) {\n    eventFilter = filter;\n  }\n  element.addEventListener(event, function (e) {\n    var closestMatchingTarget = e.target ? e.target.closest(eventFilter) : null;\n    if (!eventFilter || eventFilter && e.target && closestMatchingTarget) {\n      var currentTarget = eventFilter ? closestMatchingTarget : e.currentTarget;\n\n      // reassign the property as it is a getters only\n      defineProperty(e, \"currentTarget\", {\n        value: currentTarget\n      });\n      // keep a reference to the top-level target\n      defineProperty(e, \"delegateTarget\", {\n        value: element\n      });\n      eventHandler(e);\n    }\n  }, Boolean(useCapture));\n};\nexport var off = function off(element, events, filter, handler, useCapture) {\n  removeEventListeners(element, events, filter, handler, useCapture);\n};\nexport var removeEventListeners = function removeEventListeners(element, events, handler, useCapture) {\n  var eventNames = isArray(events) ? events : (events || \"\").split(\" \");\n  eventNames.forEach(function (eventName) {\n    removeEventListener(element, eventName, handler, useCapture);\n  });\n};\nexport var removeEventListener = function removeEventListener(element, event, handler, useCapture) {\n  element.removeEventListener(event, handler, Boolean(useCapture));\n};\nexport var applyEventMap = function applyEventMap(events) {\n  var eventMap = getEventMap(navigator.userAgent);\n  function queryEventMap(e) {\n    return eventMap[e] || e;\n  }\n  var eventRegEx = /([^ ]+)/g;\n  var appliedEvents = events.replace(eventRegEx, queryEventMap);\n  return appliedEvents;\n};\nexport var setDefaultEvents = function setDefaultEvents(type, events) {\n  var proto = type.prototype;\n  if (proto.events) {\n    events.forEach(function (event) {\n      if (proto.events.indexOf(event) < 0) {\n        proto.events.push(event);\n      }\n    });\n  } else {\n    proto.events = events;\n  }\n};\nexport var wheelDeltaY = function wheelDeltaY(jQueryEvent) {\n  var e = jQueryEvent.originalEvent || jQueryEvent;\n  var deltaY = e.wheelDeltaY;\n  var delta;\n  if (e.wheelDelta) {\n    // Webkit and IE\n    if (deltaY === undefined || deltaY) {\n      // IE does not have deltaY, thus always scroll (horizontal scrolling is treated as vertical)\n      delta = e.wheelDelta;\n    }\n  } else if (e.detail && e.axis === e.VERTICAL_AXIS) {\n    // Firefox and Opera\n    delta = -e.detail * 10;\n  }\n  return delta;\n};\nexport var guid = function guid() {\n  var id = \"\";\n  var i;\n  var random;\n  for (i = 0; i < 32; i++) {\n    random = Math.random() * 16 | 0;\n    if (i === 8 || i === 12 || i === 16 || i === 20) {\n      id += \"-\";\n    }\n    id += (i === 12 ? 4 : i === 16 ? random & 3 | 8 : random).toString(16); // eslint-disable-line no-nested-ternary\n  }\n\n  return id;\n};\nexport var now = function now() {\n  return Number(new Date());\n};\nexport var noop = function noop() {};\nexport var renderPos = function renderPos(pos) {\n  var result = [];\n  if (pos) {\n    var parts = toHyphens(pos).split(\"-\");\n    for (var i = 0; i < parts.length; i++) {\n      result.push(\"k-pos-\" + parts[i]);\n    }\n  }\n  return result.join(\" \");\n};\n\n/* eslint-enable arrow-body-style */","map":null,"metadata":{},"sourceType":"module"}